<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>EAFC Guide — Card Wall</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
<style>
  :root{
    /* FC26-ish background */
    --bg0:#06131A; --text:#EAF6FF; --muted:#9FBBCD;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; color:var(--text);
    font-family:"Poppins",system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial;
    background:
      radial-gradient(1000px 700px at 15% -10%, rgba(37,182,255,.18), transparent 50%),
      radial-gradient(900px 600px at 90% 0%, rgba(34,228,198,.16), transparent 50%),
      radial-gradient(1200px 900px at 60% 110%, rgba(155,255,83,.08), transparent 60%),
      var(--bg0);
  }
  header{position:sticky; top:0; z-index:10; padding:10px 12px; backdrop-filter:blur(10px)}
  .wrap{max-width:1280px; margin:0 auto; display:flex; gap:8px; align-items:center}
  h1{margin:0; font-size:16px}
  .search{flex:1; display:flex; align-items:center; gap:8px; padding:8px 12px; border-radius:12px; background:rgba(255,255,255,.03)}
  .search input{width:100%; background:transparent; border:0; color:var(--text); outline:none}

  main{max-width:1280px; margin:10px auto 24px; padding:0 10px}

  /* Grid: 4 on mobile, 8 on desktop */
  .grid{display:grid; gap:10px; grid-template-columns:repeat(4,1fr)}
  @media (min-width:1200px){ .grid{grid-template-columns:repeat(8,1fr); gap:12px} }

  /* Pure card artwork (no box) */
  .card{
    position:relative; cursor:pointer; -webkit-tap-highlight-color:transparent;
    transition:transform .12s ease, filter .12s ease;
  }
  .card:focus-visible{outline:2px solid rgba(255,255,255,.25); outline-offset:4px; border-radius:14px}
  .card:hover{ transform:translateY(-2px); filter:brightness(1.02) }

  /* The artwork itself */
  .art{
    width:100%; aspect-ratio:3/4;     /* keep all cards same shape */
    display:block; border-radius:14px; overflow:hidden;
    box-shadow:0 8px 20px rgba(0,0,0,.35); /* subtle depth under the art only */
    background:#0F0D12;
    object-fit:cover;                   /* SVG/PNG/JPG all fine */
  }

  /* Modal (optional) */
  .modal{position:fixed; inset:0; display:none; place-items:center; background:rgba(0,0,0,.55); backdrop-filter:blur(6px); z-index:50}
  .modal.open{display:grid}
  .modal-card{width:min(720px,92vw); background:rgba(6,19,26,.94); border-radius:16px; padding:16px}
  .modal h3{margin:0 0 8px 0}
  .x{all:unset; float:right; cursor:pointer; padding:6px 10px; border-radius:10px; background:rgba(255,255,255,.06)}
  .muted{color:var(--muted)}
</style>
</head>
<body>
<header>
  <div class="wrap">
    <h1>EAFC Guide</h1>
    <div class="search">
      <svg width="16" height="16" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M10 18a8 8 0 1 1 5.292-14.036A8 8 0 0 1 10 18m11.707 2.293l-5.387-5.387A9.956 9.956 0 0 0 20 10a10 10 0 1 0-10 10a9.956 9.956 0 0 0 4.906-1.68l5.387 5.387z"/></svg>
      <input id="q" placeholder="Search players…" inputmode="search" />
    </div>
  </div>
</header>

<main>
  <section id="grid" class="grid" aria-live="polite"></section>
</main>

<!-- Modal -->
<div id="modal" class="modal" aria-hidden="true">
  <div class="modal-card">
    <button class="x" id="closeModal">✕</button>
    <h3 id="mTitle">Player</h3>
    <div class="muted" id="mSub"></div>
    <div style="margin-top:12px">
      <!-- If you want, you can render a bigger art here too -->
      <img id="mArt" class="art" style="width:180px; box-shadow:none" alt="">
    </div>
  </div>
</div>

<script>
const $ = s=>document.querySelector(s);
const $$ = s=>document.querySelectorAll(s);

/* Load players.json (same-origin, eg. GitHub Pages) */
let ALL = [];
async function boot(){
  const res = await fetch("data/players.json", {cache:"no-cache"});
  const json = await res.json();
  ALL = json.players || [];
  render();
}

/* Search */
$("#q").addEventListener("input", ()=>render());

function render(){
  const q = $("#q").value.trim().toLowerCase();
  const list = ALL.filter(p=>{
    if(!q) return true;
    const hay = (p.name+" "+(p.club||"")+" "+(p.nation||"")).toLowerCase();
    return hay.includes(q);
  });

  const html = list.map(p=>`
    <figure class="card" tabindex="0" role="button" aria-label="${esc(p.name)}" data-id="${p.id}">
      <img class="art" src="${esc(p.image)}" alt="${esc(p.name)} card" loading="lazy" />
    </figure>
  `).join("");

  $("#grid").innerHTML = html;

  $$("#grid .card").forEach(el=>{
    el.addEventListener("click", openModal);
    el.addEventListener("keydown", e=>{ if(e.key==="Enter"||e.key===" ") openModal.call(el,e); });
  });
}

/* Minimal modal */
function openModal(){
  const id = this.dataset.id;
  const p = ALL.find(x=>String(x.id)===String(id));
  if(!p) return;
  $("#mTitle").textContent = p.name;
  $("#mSub").textContent   = [p.position, p.club, p.nation].filter(Boolean).join(" • ");
  $("#mArt").src = p.image;
  $("#mArt").alt = p.name+" card";
  $("#modal").classList.add("open");
  $("#modal").setAttribute("aria-hidden","false");
}

$("#closeModal").addEventListener("click", closeModal);
$("#modal").addEventListener("click", e=>{ if(e.target.id==="modal") closeModal(); });
window.addEventListener("keydown", e=>{ if(e.key==="Escape") closeModal(); });
function closeModal(){ $("#modal").classList.remove("open"); $("#modal").setAttribute("aria-hidden","true"); }

function esc(s){return String(s??"").replace(/[&<>"']/g,m=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"}[m]))}

boot();
</script>
</body>
</html>
